<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>IGA framework: /home/juan/xul_ga/igap/iga/population/standard.py Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.3 -->
<div class="tabs">
  <ul>
    <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
    <li><a href="namespaces.html"><span>Namespaces</span></a></li>
    <li><a href="annotated.html"><span>Classes</span></a></li>
    <li class="current"><a href="files.html"><span>Files</span></a></li>
  </ul>
</div>
<h1>/home/juan/xul_ga/igap/iga/population/standard.py</h1><a href="standard_8py.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a><a class="code" href="namespaceiga_1_1population_1_1standard.html">00001</a> <span class="keyword">from</span> gastandard <span class="keyword">import</span> Gastandard
<a name="l00002"></a>00002 
<a name="l00003"></a><a class="code" href="classiga_1_1population_1_1standard_1_1Standard.html">00003</a> <span class="keyword">class </span><a class="code" href="classiga_1_1population_1_1standard_1_1Standard.html">Standard</a>(Gastandard):
<a name="l00004"></a><a class="code" href="classiga_1_1population_1_1standard_1_1Standard.html#f368f3e29658b25f9fbdbacfa36ea0c2">00004</a>     <span class="keyword">def </span><a class="code" href="classiga_1_1population_1_1standard_1_1Standard.html#f368f3e29658b25f9fbdbacfa36ea0c2">__init__</a>(self, paramClass, paramDict):
<a name="l00005"></a>00005         Gastandard.__init__(self, paramClass, paramDict)
<a name="l00006"></a>00006 
<a name="l00007"></a>00007         <span class="comment"># reevaluate the need to keep a ref to the subset dictionary</span>
<a name="l00008"></a>00008         subset = paramDict[<span class="stringliteral">'subset'</span>]
<a name="l00009"></a>00009         execstr = <span class="stringliteral">'from iga.subset.%s import %s as subsetfunc'</span> % (subset[<span class="stringliteral">'type'</span>], subset[<span class="stringliteral">'type'</span>])
<a name="l00010"></a>00010         exec(execstr)
<a name="l00011"></a><a class="code" href="classiga_1_1population_1_1standard_1_1Standard.html#9723f39dd6bfbf8bd33de1e214ed1301">00011</a>         self.<a class="code" href="classiga_1_1population_1_1standard_1_1Standard.html#9723f39dd6bfbf8bd33de1e214ed1301">subsetfunc</a> = subsetfunc
<a name="l00012"></a>00012 
<a name="l00013"></a>00013         inject = paramDict[<span class="stringliteral">'inject'</span>]
<a name="l00014"></a>00014         execstr = <span class="stringliteral">'from iga.inject.%s import %s as injectfunc'</span> % (inject[<span class="stringliteral">'type'</span>], inject[<span class="stringliteral">'type'</span>])
<a name="l00015"></a>00015         exec(execstr)
<a name="l00016"></a><a class="code" href="classiga_1_1population_1_1standard_1_1Standard.html#33f49f754c800c1911b6423de0ec2b61">00016</a>         self.<a class="code" href="classiga_1_1population_1_1standard_1_1Standard.html#33f49f754c800c1911b6423de0ec2b61">injectfunc</a> = injectfunc
<a name="l00017"></a>00017 
<a name="l00018"></a><a class="code" href="classiga_1_1population_1_1standard_1_1Standard.html#333c42b88a23363aaa615ff19bb4809c">00018</a>         self.<a class="code" href="classiga_1_1population_1_1standard_1_1Standard.html#333c42b88a23363aaa615ff19bb4809c">subset</a> = <span class="keywordtype">None</span>
<a name="l00019"></a><a class="code" href="classiga_1_1population_1_1standard_1_1Standard.html#fd519ccf79c2a53218dc7ab59fecbb0e">00019</a>         self.<a class="code" href="classiga_1_1population_1_1standard_1_1Standard.html#fd519ccf79c2a53218dc7ab59fecbb0e">user_selected</a> = <span class="keywordtype">None</span>
<a name="l00020"></a>00020 
<a name="l00021"></a>00021 
<a name="l00022"></a>00022 <span class="comment">#---------------------------------------#</span>
<a name="l00023"></a><a class="code" href="classiga_1_1population_1_1standard_1_1Standard.html#1a7386a866f12b4256641612d5eca737">00023</a>     <span class="keyword">def </span><a class="code" href="classiga_1_1population_1_1standard_1_1Standard.html#1a7386a866f12b4256641612d5eca737">userInput</a>(self, user_selection = []):
<a name="l00024"></a>00024         <span class="stringliteral">'''</span>
<a name="l00025"></a>00025 <span class="stringliteral">        Takes a list of the indices of the individuals selected </span>
<a name="l00026"></a>00026 <span class="stringliteral">        by the user during evaluation, and we save the actual</span>
<a name="l00027"></a>00027 <span class="stringliteral">        users on a list, to be used during fitness evaluation.</span>
<a name="l00028"></a>00028 <span class="stringliteral">        It is the programmer's responsibility to decide on</span>
<a name="l00029"></a>00029 <span class="stringliteral">        the meaning of the user feedback.</span>
<a name="l00030"></a>00030 <span class="stringliteral">        '''</span>
<a name="l00031"></a>00031         user_selected = []
<a name="l00032"></a>00032         <span class="keywordflow">for</span> i <span class="keywordflow">in</span> user_selection:
<a name="l00033"></a>00033             user_selected.append(self.<a class="code" href="classiga_1_1population_1_1standard_1_1Standard.html#333c42b88a23363aaa615ff19bb4809c">subset</a>[i])
<a name="l00034"></a>00034         self.<a class="code" href="classiga_1_1population_1_1standard_1_1Standard.html#fd519ccf79c2a53218dc7ab59fecbb0e">user_selected</a> = user_selected
<a name="l00035"></a>00035 
<a name="l00036"></a>00036 <span class="comment">#---------------------------------------#</span>
<a name="l00037"></a><a class="code" href="classiga_1_1population_1_1standard_1_1Standard.html#c21680b324458918de5fc64fde7e4f32">00037</a>     <span class="keyword">def </span><a class="code" href="classiga_1_1population_1_1standard_1_1Standard.html#c21680b324458918de5fc64fde7e4f32">getNRandom</a>(self, num):
<a name="l00038"></a>00038         <span class="keywordflow">if</span> num &lt; self.popsize:
<a name="l00039"></a>00039             <span class="keywordflow">return</span> self.params.random.sample(self.pop, num)
<a name="l00040"></a>00040         <span class="keywordflow">else</span>:
<a name="l00041"></a>00041             <span class="keywordflow">return</span> self.params.random.sample(self.pop, min(self.popsize, num))
<a name="l00042"></a>00042 
<a name="l00043"></a>00043 <span class="comment">#---------------------------------------#</span>
<a name="l00044"></a><a class="code" href="classiga_1_1population_1_1standard_1_1Standard.html#b12a95d10bd39844bc2fab8ace4f1d30">00044</a>     <span class="keyword">def </span><a class="code" href="classiga_1_1population_1_1standard_1_1Standard.html#b12a95d10bd39844bc2fab8ace4f1d30">fitnessBias</a>(self, pop):
<a name="l00045"></a>00045         <span class="keywordflow">for</span> ind <span class="keywordflow">in</span> pop:
<a name="l00046"></a>00046             bias = ind.bloodline
<a name="l00047"></a>00047             ind.fitness += ind.fitness * bias
<a name="l00048"></a>00048 
<a name="l00049"></a>00049 <span class="comment">#---------------------------------------#</span>
<a name="l00050"></a><a class="code" href="classiga_1_1population_1_1standard_1_1Standard.html#d0a79082034d64d5e506d124cd739ccd">00050</a>     <span class="keyword">def </span><a class="code" href="classiga_1_1population_1_1standard_1_1Standard.html#d0a79082034d64d5e506d124cd739ccd">eval</a>(self, pop=None):
<a name="l00051"></a>00051         <span class="keywordflow">if</span> <span class="keywordflow">not</span> pop:
<a name="l00052"></a>00052             pop = self.pop
<a name="l00053"></a>00053 
<a name="l00054"></a>00054         fitness_func = self.params.app.fitness
<a name="l00055"></a>00055         user_selected = self.<a class="code" href="classiga_1_1population_1_1standard_1_1Standard.html#fd519ccf79c2a53218dc7ab59fecbb0e">user_selected</a>
<a name="l00056"></a>00056         <span class="keywordflow">for</span> ind <span class="keywordflow">in</span> pop:
<a name="l00057"></a>00057             fitness_func(ind, user_selected)
<a name="l00058"></a>00058 
<a name="l00059"></a>00059         <span class="comment"># fitness bias of population</span>
<a name="l00060"></a>00060         self.<a class="code" href="classiga_1_1population_1_1standard_1_1Standard.html#b12a95d10bd39844bc2fab8ace4f1d30">fitnessBias</a>(pop)
<a name="l00061"></a>00061         <span class="comment"># scale fitness of population</span>
<a name="l00062"></a>00062         self.params.app.scaleFitness(pop)
<a name="l00063"></a>00063 
<a name="l00064"></a>00064 
<a name="l00065"></a>00065 <span class="comment">#---------------------------------------#</span>
<a name="l00066"></a><a class="code" href="classiga_1_1population_1_1standard_1_1Standard.html#7c77d39d459ebcc7771110ab22037092">00066</a>     <span class="keyword">def </span><a class="code" href="classiga_1_1population_1_1standard_1_1Standard.html#7c77d39d459ebcc7771110ab22037092">setBloodLine</a>(self, p1, p2, c1, c2):
<a name="l00067"></a>00067         <span class="stringliteral">'''</span>
<a name="l00068"></a>00068 <span class="stringliteral">        p1, p2: parent1, parent2</span>
<a name="l00069"></a>00069 <span class="stringliteral">        c1, c2: child1, child2</span>
<a name="l00070"></a>00070 <span class="stringliteral">        Set the bloodline of the children based on the bloodline of the parents.</span>
<a name="l00071"></a>00071 <span class="stringliteral">        '''</span>
<a name="l00072"></a>00072         p1_blood, p2_blood = p1.bloodline, p2.bloodline
<a name="l00073"></a>00073         c1.bloodline = c1.from_p1 * p1_blood + c1.from_p2 * p2_blood
<a name="l00074"></a>00074         c2.bloodline = c2.from_p1 * p1_blood + c2.from_p2 * p2_blood
<a name="l00075"></a>00075 
<a name="l00076"></a>00076 <span class="comment">#---------------------------------------#</span>
<a name="l00077"></a><a class="code" href="classiga_1_1population_1_1standard_1_1Standard.html#83cb4d2088dee384cd537ecbfc118d7a">00077</a>     <span class="keyword">def </span><a class="code" href="classiga_1_1population_1_1standard_1_1Standard.html#83cb4d2088dee384cd537ecbfc118d7a">crossover</a>(self, parent1, parent2):
<a name="l00078"></a>00078         child1, child2 = self.params.crossover(parent1, parent2)
<a name="l00079"></a>00079         self.<a class="code" href="classiga_1_1population_1_1standard_1_1Standard.html#7c77d39d459ebcc7771110ab22037092">setBloodLine</a>(parent1, parent2, child1, child2)
<a name="l00080"></a>00080         <span class="keywordflow">return</span> child1, child2
<a name="l00081"></a>00081 
<a name="l00082"></a>00082 <span class="comment">#---------------------------------------#</span>
<a name="l00083"></a><a class="code" href="classiga_1_1population_1_1standard_1_1Standard.html#c4c82fd78cc042040096b61bbd223837">00083</a>     <span class="keyword">def </span><a class="code" href="classiga_1_1population_1_1standard_1_1Standard.html#c4c82fd78cc042040096b61bbd223837">injectGenomes</a>(self, genomes):
<a name="l00084"></a>00084         <span class="keywordflow">if</span> genomes:
<a name="l00085"></a>00085             <span class="keywordflow">for</span> ind <span class="keywordflow">in</span> genomes:
<a name="l00086"></a>00086                 ind.bloodline = 1.
<a name="l00087"></a>00087 
<a name="l00088"></a>00088             to_replace = int(self.popsize * self.paramDict[<span class="stringliteral">'inject'</span>][<span class="stringliteral">'percent'</span>])
<a name="l00089"></a>00089             self.<a class="code" href="classiga_1_1population_1_1standard_1_1Standard.html#33f49f754c800c1911b6423de0ec2b61">injectfunc</a>(self.pop, genomes, self.params.random, to_replace)
<a name="l00090"></a>00090 
<a name="l00091"></a>00091 <span class="comment">#---------------------------------------#</span>
<a name="l00092"></a><a class="code" href="classiga_1_1population_1_1standard_1_1Standard.html#a6aebb67ddafca6a738a2cc9ab8d7bab">00092</a>     <span class="keyword">def </span><a class="code" href="classiga_1_1population_1_1standard_1_1Standard.html#a6aebb67ddafca6a738a2cc9ab8d7bab">selectSubset</a>(self):
<a name="l00093"></a>00093         <span class="stringliteral">'''</span>
<a name="l00094"></a>00094 <span class="stringliteral">        Select a small subset from the large population of the</span>
<a name="l00095"></a>00095 <span class="stringliteral">        IGA to be displayed for user evaluation.</span>
<a name="l00096"></a>00096 <span class="stringliteral">        '''</span>
<a name="l00097"></a><a class="code" href="classiga_1_1population_1_1standard_1_1Standard.html#8016c772756ed5d72288d89b848e3821">00097</a>         self.<a class="code" href="classiga_1_1population_1_1standard_1_1Standard.html#333c42b88a23363aaa615ff19bb4809c">subset</a>, self.<a class="code" href="classiga_1_1population_1_1standard_1_1Standard.html#8016c772756ed5d72288d89b848e3821">subset_index</a> = self.<a class="code" href="classiga_1_1population_1_1standard_1_1Standard.html#9723f39dd6bfbf8bd33de1e214ed1301">subsetfunc</a>(self.pop, self.params.random, self.paramDict[<span class="stringliteral">'subset'</span>][<span class="stringliteral">'size'</span>])
<a name="l00098"></a>00098         <span class="keywordflow">print</span> <span class="stringliteral">'the best selected is '</span>, self.<a class="code" href="classiga_1_1population_1_1standard_1_1Standard.html#333c42b88a23363aaa615ff19bb4809c">subset</a>[-1].fitness, self.<a class="code" href="classiga_1_1population_1_1standard_1_1Standard.html#8016c772756ed5d72288d89b848e3821">subset_index</a>
<a name="l00099"></a>00099         <span class="keywordflow">return</span> self.<a class="code" href="classiga_1_1population_1_1standard_1_1Standard.html#333c42b88a23363aaa615ff19bb4809c">subset</a>
<a name="l00100"></a>00100 
<a name="l00101"></a>00101 <span class="comment">#---------------------------------------#</span>
</pre></div><hr size="1"><address style="text-align: right;"><small>Generated on Tue Nov 27 11:56:03 2007 for IGA framework by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.5.3 </small></address>
</body>
</html>
