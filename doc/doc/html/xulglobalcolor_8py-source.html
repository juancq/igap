<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>IGA framework: /home/juan/xul_ga/igap/app/xulgui/xulglobalcolor.py Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.3 -->
<div class="tabs">
  <ul>
    <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
    <li><a href="namespaces.html"><span>Namespaces</span></a></li>
    <li><a href="annotated.html"><span>Classes</span></a></li>
    <li class="current"><a href="files.html"><span>Files</span></a></li>
  </ul>
</div>
<h1>/home/juan/xul_ga/igap/app/xulgui/xulglobalcolor.py</h1><a href="xulglobalcolor_8py.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a><a class="code" href="namespaceapp_1_1xulgui_1_1xulglobalcolor.html">00001</a> <span class="keyword">from</span> individual <span class="keyword">import</span> Individual
<a name="l00002"></a>00002 <span class="keyword">from</span> gacommon <span class="keyword">import</span> gaParams
<a name="l00003"></a>00003 <span class="keyword">import</span> random, string
<a name="l00004"></a>00004 <span class="keyword">from</span> helperfuncs <span class="keyword">import</span> hamming, lcs
<a name="l00005"></a>00005 
<a name="l00006"></a>00006 
<a name="l00007"></a>00007 <span class="comment">#-------------------------------------------#</span>
<a name="l00008"></a><a class="code" href="classapp_1_1xulgui_1_1xulglobalcolor_1_1Xulglobalcolor.html">00008</a> <span class="keyword">class </span><a class="code" href="classapp_1_1xulgui_1_1xulglobalcolor_1_1Xulglobalcolor.html">Xulglobalcolor</a>:
<a name="l00009"></a><a class="code" href="classapp_1_1xulgui_1_1xulglobalcolor_1_1Xulglobalcolor.html#b6f5b808b0797a8058c0addbc260080f">00009</a>     <span class="keyword">def </span><a class="code" href="classapp_1_1xulgui_1_1xulglobalcolor_1_1Xulglobalcolor.html#b6f5b808b0797a8058c0addbc260080f">__init__</a>(self, params, random):
<a name="l00010"></a><a class="code" href="classapp_1_1xulgui_1_1xulglobalcolor_1_1Xulglobalcolor.html#8e783b8b014aeb19c8d4b299856ce148">00010</a>         self.<a class="code" href="classapp_1_1xulgui_1_1xulglobalcolor_1_1Xulglobalcolor.html#8e783b8b014aeb19c8d4b299856ce148">random</a> = random
<a name="l00011"></a><a class="code" href="classapp_1_1xulgui_1_1xulglobalcolor_1_1Xulglobalcolor.html#394786b9afe1872e1d4bf726b493deb1">00011</a>         self.<a class="code" href="classapp_1_1xulgui_1_1xulglobalcolor_1_1Xulglobalcolor.html#394786b9afe1872e1d4bf726b493deb1">geneLen</a> = 0
<a name="l00012"></a><a class="code" href="classapp_1_1xulgui_1_1xulglobalcolor_1_1Xulglobalcolor.html#41242aa0f38f5aff4aa6817eb02d3566">00012</a>         self.<a class="code" href="classapp_1_1xulgui_1_1xulglobalcolor_1_1Xulglobalcolor.html#41242aa0f38f5aff4aa6817eb02d3566">bits</a> = params[<span class="stringliteral">'bits'</span>]
<a name="l00013"></a><a class="code" href="classapp_1_1xulgui_1_1xulglobalcolor_1_1Xulglobalcolor.html#1d860e158c4513ab94286ec4f4684f2d">00013</a>         self.<a class="code" href="classapp_1_1xulgui_1_1xulglobalcolor_1_1Xulglobalcolor.html#1d860e158c4513ab94286ec4f4684f2d">params</a> = params
<a name="l00014"></a>00014 
<a name="l00015"></a><a class="code" href="classapp_1_1xulgui_1_1xulglobalcolor_1_1Xulglobalcolor.html#d4f89a85b5e02974007376ca97960f80">00015</a>         self.<a class="code" href="classapp_1_1xulgui_1_1xulglobalcolor_1_1Xulglobalcolor.html#d4f89a85b5e02974007376ca97960f80">gridSize</a> = params[<span class="stringliteral">'rows'</span>] * params[<span class="stringliteral">'cols'</span>]
<a name="l00016"></a>00016 
<a name="l00017"></a><a class="code" href="classapp_1_1xulgui_1_1xulglobalcolor_1_1Xulglobalcolor.html#9100e3a0ac905a4efd8932ce66e6234e">00017</a>         self.<a class="code" href="classapp_1_1xulgui_1_1xulglobalcolor_1_1Xulglobalcolor.html#9100e3a0ac905a4efd8932ce66e6234e">objScaleMax</a> = params[<span class="stringliteral">'objScaleMax'</span>]
<a name="l00018"></a><a class="code" href="classapp_1_1xulgui_1_1xulglobalcolor_1_1Xulglobalcolor.html#e6d540d81dd66ab3e9cefd85aec13981">00018</a>         self.<a class="code" href="classapp_1_1xulgui_1_1xulglobalcolor_1_1Xulglobalcolor.html#e6d540d81dd66ab3e9cefd85aec13981">objScaleMin</a> = params[<span class="stringliteral">'objScaleMin'</span>]
<a name="l00019"></a><a class="code" href="classapp_1_1xulgui_1_1xulglobalcolor_1_1Xulglobalcolor.html#0af8a4dc233805fc1f4b57473ef39ea3">00019</a>         self.<a class="code" href="classapp_1_1xulgui_1_1xulglobalcolor_1_1Xulglobalcolor.html#0af8a4dc233805fc1f4b57473ef39ea3">subjMax</a> = 0.
<a name="l00020"></a><a class="code" href="classapp_1_1xulgui_1_1xulglobalcolor_1_1Xulglobalcolor.html#db446a3e05a499bba971e2fcf017a18f">00020</a>         self.<a class="code" href="classapp_1_1xulgui_1_1xulglobalcolor_1_1Xulglobalcolor.html#db446a3e05a499bba971e2fcf017a18f">subjMin</a> = 0.
<a name="l00021"></a><a class="code" href="classapp_1_1xulgui_1_1xulglobalcolor_1_1Xulglobalcolor.html#e88ef1db63a4e430209d9bfd6dd485e2">00021</a>         self.<a class="code" href="classapp_1_1xulgui_1_1xulglobalcolor_1_1Xulglobalcolor.html#e88ef1db63a4e430209d9bfd6dd485e2">subjScaleMax</a> = params[<span class="stringliteral">'subjScaleMax'</span>]
<a name="l00022"></a><a class="code" href="classapp_1_1xulgui_1_1xulglobalcolor_1_1Xulglobalcolor.html#161bd045510cd4799d5f26e647be37b9">00022</a>         self.<a class="code" href="classapp_1_1xulgui_1_1xulglobalcolor_1_1Xulglobalcolor.html#161bd045510cd4799d5f26e647be37b9">subjScaleMin</a> = params[<span class="stringliteral">'subjScaleMin'</span>]
<a name="l00023"></a>00023 
<a name="l00024"></a><a class="code" href="classapp_1_1xulgui_1_1xulglobalcolor_1_1Xulglobalcolor.html#784e9101e1bf578b5a8d9f75313bd7f9">00024</a>     <span class="keyword">def </span><a class="code" href="classapp_1_1xulgui_1_1xulglobalcolor_1_1Xulglobalcolor.html#784e9101e1bf578b5a8d9f75313bd7f9">createPop</a>(self, popsize):
<a name="l00025"></a>00025 
<a name="l00026"></a>00026         <span class="comment">#Parse user interface.</span>
<a name="l00027"></a>00027         <span class="comment">#Compute how many widgets there are in the UI.</span>
<a name="l00028"></a>00028         <span class="keyword">import</span> xml.dom.minidom
<a name="l00029"></a>00029         dom = xml.dom.minidom.parse(self.<a class="code" href="classapp_1_1xulgui_1_1xulglobalcolor_1_1Xulglobalcolor.html#1d860e158c4513ab94286ec4f4684f2d">params</a>[<span class="stringliteral">'ui_file'</span>])
<a name="l00030"></a>00030         panel = dom.getElementsByTagName(<span class="stringliteral">'panel'</span>)
<a name="l00031"></a>00031         ui_data = panel[0].cloneNode(<span class="keyword">True</span>)
<a name="l00032"></a>00032         dom.unlink()
<a name="l00033"></a>00033 
<a name="l00034"></a><a class="code" href="classapp_1_1xulgui_1_1xulglobalcolor_1_1Xulglobalcolor.html#505e66258c70359c78eb9f4e50cc1218">00034</a>         self.<a class="code" href="classapp_1_1xulgui_1_1xulglobalcolor_1_1Xulglobalcolor.html#505e66258c70359c78eb9f4e50cc1218">ELEMENT_NODE</a> = xml.dom.minidom.Node.ELEMENT_NODE
<a name="l00035"></a>00035         widgetNum = 0
<a name="l00036"></a>00036 
<a name="l00037"></a>00037         uiWidgets = {}
<a name="l00038"></a>00038         <span class="comment"># contains actual location of widgets in XML tree</span>
<a name="l00039"></a>00039         elementNodes = []
<a name="l00040"></a>00040         <span class="comment"># ID list is location in XML tree + 1 in order to prevent having a zero ID value</span>
<a name="l00041"></a>00041         idList = []
<a name="l00042"></a>00042         <span class="keywordflow">for</span> i <span class="keywordflow">in</span> xrange(len(ui_data.childNodes)):
<a name="l00043"></a>00043             <span class="keywordflow">if</span> ui_data.childNodes[i].nodeType == self.<a class="code" href="classapp_1_1xulgui_1_1xulglobalcolor_1_1Xulglobalcolor.html#505e66258c70359c78eb9f4e50cc1218">ELEMENT_NODE</a>:
<a name="l00044"></a>00044                 elementNodes.append(i)
<a name="l00045"></a>00045                 idList.append(i + 1)
<a name="l00046"></a>00046                 widgetNum += 1
<a name="l00047"></a>00047 
<a name="l00048"></a>00048                 <span class="comment"># Store in list representation to be used to generate wxPython code</span>
<a name="l00049"></a>00049                 data = {}
<a name="l00050"></a>00050                 nodeName = ui_data.childNodes[i].nodeName
<a name="l00051"></a>00051                 data[<span class="stringliteral">'name'</span>] = nodeName
<a name="l00052"></a>00052                 data[<span class="stringliteral">'value'</span>] = ui_data.childNodes[i].getAttribute(<span class="stringliteral">'value'</span>)
<a name="l00053"></a>00053                 data[<span class="stringliteral">'size'</span>] = ui_data.childNodes[i].getAttribute(<span class="stringliteral">'size'</span>)
<a name="l00054"></a>00054                 <span class="keywordflow">if</span> data[<span class="stringliteral">'size'</span>]:
<a name="l00055"></a>00055                     data[<span class="stringliteral">'size'</span>] = eval(data[<span class="stringliteral">'size'</span>])
<a name="l00056"></a>00056                 uiWidgets[i+1]= data
<a name="l00057"></a>00057 
<a name="l00058"></a><a class="code" href="classapp_1_1xulgui_1_1xulglobalcolor_1_1Xulglobalcolor.html#83f842a49d32b39c37323245e9b5b65a">00058</a>         self.<a class="code" href="classapp_1_1xulgui_1_1xulglobalcolor_1_1Xulglobalcolor.html#83f842a49d32b39c37323245e9b5b65a">uiWidgets</a> = uiWidgets
<a name="l00059"></a>00059 
<a name="l00060"></a>00060         self.<a class="code" href="classapp_1_1xulgui_1_1xulglobalcolor_1_1Xulglobalcolor.html#394786b9afe1872e1d4bf726b493deb1">geneLen</a> = self.<a class="code" href="classapp_1_1xulgui_1_1xulglobalcolor_1_1Xulglobalcolor.html#41242aa0f38f5aff4aa6817eb02d3566">bits</a> + self.<a class="code" href="classapp_1_1xulgui_1_1xulglobalcolor_1_1Xulglobalcolor.html#41242aa0f38f5aff4aa6817eb02d3566">bits</a>
<a name="l00061"></a>00061         
<a name="l00062"></a>00062         <span class="comment"># wrong, need to change to RGB</span>
<a name="l00063"></a><a class="code" href="classapp_1_1xulgui_1_1xulglobalcolor_1_1Xulglobalcolor.html#2158540bf802865fe87c92dc66ed515e">00063</a>         self.<a class="code" href="classapp_1_1xulgui_1_1xulglobalcolor_1_1Xulglobalcolor.html#2158540bf802865fe87c92dc66ed515e">maxDist</a> = ( (360*360) + (100*100) + (100*100) )**0.5
<a name="l00064"></a>00064 
<a name="l00065"></a>00065         <span class="comment"># objective component bounds</span>
<a name="l00066"></a><a class="code" href="classapp_1_1xulgui_1_1xulglobalcolor_1_1Xulglobalcolor.html#2de14c0ec136ac09ea5601b7a4a02e74">00066</a>         self.<a class="code" href="classapp_1_1xulgui_1_1xulglobalcolor_1_1Xulglobalcolor.html#2de14c0ec136ac09ea5601b7a4a02e74">objMax</a> = 100
<a name="l00067"></a><a class="code" href="classapp_1_1xulgui_1_1xulglobalcolor_1_1Xulglobalcolor.html#9f7da7a4c17aacffa170488b277c1b46">00067</a>         self.<a class="code" href="classapp_1_1xulgui_1_1xulglobalcolor_1_1Xulglobalcolor.html#9f7da7a4c17aacffa170488b277c1b46">objMin</a> = 0
<a name="l00068"></a>00068 
<a name="l00069"></a>00069         <span class="comment"># Create chromosome of widget ids</span>
<a name="l00070"></a>00070         gridChrom = [0] * self.<a class="code" href="classapp_1_1xulgui_1_1xulglobalcolor_1_1Xulglobalcolor.html#d4f89a85b5e02974007376ca97960f80">gridSize</a>
<a name="l00071"></a>00071         gridChrom[:len(idList)] = idList[:]
<a name="l00072"></a><a class="code" href="classapp_1_1xulgui_1_1xulglobalcolor_1_1Xulglobalcolor.html#2ce89714eeb96215e13f8ca1387bb748">00072</a>         self.<a class="code" href="classapp_1_1xulgui_1_1xulglobalcolor_1_1Xulglobalcolor.html#2ce89714eeb96215e13f8ca1387bb748">gridLen</a> = len(gridChrom)
<a name="l00073"></a>00073 
<a name="l00074"></a>00074         <span class="comment"># subjective component bounds</span>
<a name="l00075"></a>00075         <span class="comment"># widgets + window</span>
<a name="l00076"></a>00076         <span class="comment">#self.subjMax = ((widgetNum + 1) * 100.) + (100. * self.gridLen)</span>
<a name="l00077"></a>00077         self.<a class="code" href="classapp_1_1xulgui_1_1xulglobalcolor_1_1Xulglobalcolor.html#0af8a4dc233805fc1f4b57473ef39ea3">subjMax</a> = self.<a class="code" href="classapp_1_1xulgui_1_1xulglobalcolor_1_1Xulglobalcolor.html#2ce89714eeb96215e13f8ca1387bb748">gridLen</a> + self.<a class="code" href="classapp_1_1xulgui_1_1xulglobalcolor_1_1Xulglobalcolor.html#394786b9afe1872e1d4bf726b493deb1">geneLen</a>
<a name="l00078"></a>00078 
<a name="l00079"></a>00079         <span class="comment"># if comparing to best and worst, then increase subjective max scale accordingly</span>
<a name="l00080"></a>00080         <span class="keywordflow">if</span> self.<a class="code" href="classapp_1_1xulgui_1_1xulglobalcolor_1_1Xulglobalcolor.html#1d860e158c4513ab94286ec4f4684f2d">params</a>[<span class="stringliteral">'compare'</span>] == <span class="stringliteral">'both'</span>:
<a name="l00081"></a>00081             self.<a class="code" href="classapp_1_1xulgui_1_1xulglobalcolor_1_1Xulglobalcolor.html#0af8a4dc233805fc1f4b57473ef39ea3">subjMax</a> *= 2
<a name="l00082"></a>00082 
<a name="l00083"></a><a class="code" href="classapp_1_1xulgui_1_1xulglobalcolor_1_1Xulglobalcolor.html#a130f263cc42e117972ce6fe3849c225">00083</a>         self.<a class="code" href="classapp_1_1xulgui_1_1xulglobalcolor_1_1Xulglobalcolor.html#a130f263cc42e117972ce6fe3849c225">widgetNum</a> = widgetNum
<a name="l00084"></a><a class="code" href="classapp_1_1xulgui_1_1xulglobalcolor_1_1Xulglobalcolor.html#3775d6be7b5c8043705a33ddc88c82dd">00084</a>         self.<a class="code" href="classapp_1_1xulgui_1_1xulglobalcolor_1_1Xulglobalcolor.html#3775d6be7b5c8043705a33ddc88c82dd">elementNodes</a> = elementNodes
<a name="l00085"></a>00085 
<a name="l00086"></a>00086         pop = []
<a name="l00087"></a>00087         <span class="keywordflow">for</span> i <span class="keywordflow">in</span> xrange(popsize):
<a name="l00088"></a>00088             random.shuffle(gridChrom)
<a name="l00089"></a>00089             pop.append(Individual(<span class="keywordtype">None</span>, <span class="keywordtype">None</span>, {<span class="stringliteral">'grid'</span>:gridChrom[:], <span class="stringliteral">'style'</span>:[random.randint(0,1) <span class="keywordflow">for</span> i <span class="keywordflow">in</span> xrange(self.<a class="code" href="classapp_1_1xulgui_1_1xulglobalcolor_1_1Xulglobalcolor.html#394786b9afe1872e1d4bf726b493deb1">geneLen</a>)]}))
<a name="l00090"></a>00090 
<a name="l00091"></a>00091         <span class="keywordflow">return</span> pop
<a name="l00092"></a>00092 
<a name="l00093"></a>00093 
<a name="l00094"></a>00094 <span class="comment">#-------------------------------------------#</span>
<a name="l00095"></a><a class="code" href="classapp_1_1xulgui_1_1xulglobalcolor_1_1Xulglobalcolor.html#03e266c082a6001e0ec0f7b48421a61e">00095</a>     <span class="keyword">def </span><a class="code" href="classapp_1_1xulgui_1_1xulglobalcolor_1_1Xulglobalcolor.html#03e266c082a6001e0ec0f7b48421a61e">fitness</a>(self, ind, user_feedback):
<a name="l00096"></a>00096         <span class="stringliteral">'''</span>
<a name="l00097"></a>00097 <span class="stringliteral">        Compute fitness.</span>
<a name="l00098"></a>00098 <span class="stringliteral">        user_feedback is [best,worst]</span>
<a name="l00099"></a>00099 <span class="stringliteral">        '''</span>
<a name="l00100"></a>00100         best,worst = user_feedback
<a name="l00101"></a>00101         subj = 0
<a name="l00102"></a>00102         widgetNum = self.<a class="code" href="classapp_1_1xulgui_1_1xulglobalcolor_1_1Xulglobalcolor.html#a130f263cc42e117972ce6fe3849c225">widgetNum</a>
<a name="l00103"></a>00103         <span class="keywordflow">if</span> ind.genome == best.genome:
<a name="l00104"></a>00104             subj = 2 * len(ind.genome[<span class="stringliteral">'grid'</span>])+len(ind.genome[<span class="stringliteral">'style'</span>])
<a name="l00105"></a>00105         <span class="keywordflow">elif</span> ind.genome == worst.genome:
<a name="l00106"></a>00106             subj = 0
<a name="l00107"></a>00107         <span class="keywordflow">else</span>:
<a name="l00108"></a>00108             <span class="comment">#sum += lcs(ind.genome, best.genome)</span>
<a name="l00109"></a>00109             <span class="comment">#sum += len(ind.genome)-lcs(ind.genome, worst.genome)</span>
<a name="l00110"></a>00110             subj += hamming(ind, best, worst)
<a name="l00111"></a>00111 
<a name="l00112"></a>00112 
<a name="l00113"></a>00113         <span class="comment">#-------------------------------------------------------------#</span>
<a name="l00114"></a>00114         <span class="comment"># BEGIN OBJECTIVE EVALUATION</span>
<a name="l00115"></a>00115         <span class="comment">#-------------------------------------------------------------#</span>
<a name="l00116"></a>00116         myValues = self.<a class="code" href="classapp_1_1xulgui_1_1xulglobalcolor_1_1Xulglobalcolor.html#9a346438efdd09c1c8fcdd4e33a69a19">decode</a>(ind.genome[<span class="stringliteral">'style'</span>])
<a name="l00117"></a>00117         <span class="comment"># compare global widget color to background window color</span>
<a name="l00118"></a>00118         <span class="comment"># window color is stored at pos 0</span>
<a name="l00119"></a>00119         red = abs(myValues[1][0] - myValues[0][0])
<a name="l00120"></a>00120         green = abs(myValues[1][1] - myValues[0][1])
<a name="l00121"></a>00121         blue = abs(myValues[1][2] - myValues[0][2])
<a name="l00122"></a>00122 
<a name="l00123"></a>00123         distance = (red*red + green*green + blue*blue)**0.5
<a name="l00124"></a>00124         windColor = distance / self.<a class="code" href="classapp_1_1xulgui_1_1xulglobalcolor_1_1Xulglobalcolor.html#2158540bf802865fe87c92dc66ed515e">maxDist</a> * 100.
<a name="l00125"></a>00125 
<a name="l00126"></a>00126         obj = windColor
<a name="l00127"></a>00127         <span class="comment">#-------------------------------------------------------------#</span>
<a name="l00128"></a>00128         <span class="comment"># END OBJECTIVE EVALUATION</span>
<a name="l00129"></a>00129         <span class="comment">#-------------------------------------------------------------#</span>
<a name="l00130"></a>00130         subj = float(subj)
<a name="l00131"></a>00131         <span class="comment"># Scale objective and subjective fitness components</span>
<a name="l00132"></a>00132         objFitness = (obj-self.<a class="code" href="classapp_1_1xulgui_1_1xulglobalcolor_1_1Xulglobalcolor.html#9f7da7a4c17aacffa170488b277c1b46">objMin</a>)/(self.<a class="code" href="classapp_1_1xulgui_1_1xulglobalcolor_1_1Xulglobalcolor.html#2de14c0ec136ac09ea5601b7a4a02e74">objMax</a>-self.<a class="code" href="classapp_1_1xulgui_1_1xulglobalcolor_1_1Xulglobalcolor.html#9f7da7a4c17aacffa170488b277c1b46">objMin</a>) * self.<a class="code" href="classapp_1_1xulgui_1_1xulglobalcolor_1_1Xulglobalcolor.html#9100e3a0ac905a4efd8932ce66e6234e">objScaleMax</a> + self.<a class="code" href="classapp_1_1xulgui_1_1xulglobalcolor_1_1Xulglobalcolor.html#e6d540d81dd66ab3e9cefd85aec13981">objScaleMin</a>
<a name="l00133"></a>00133         subjFitness = (subj-self.<a class="code" href="classapp_1_1xulgui_1_1xulglobalcolor_1_1Xulglobalcolor.html#db446a3e05a499bba971e2fcf017a18f">subjMin</a>)/(self.<a class="code" href="classapp_1_1xulgui_1_1xulglobalcolor_1_1Xulglobalcolor.html#0af8a4dc233805fc1f4b57473ef39ea3">subjMax</a>-self.<a class="code" href="classapp_1_1xulgui_1_1xulglobalcolor_1_1Xulglobalcolor.html#db446a3e05a499bba971e2fcf017a18f">subjMin</a>) * self.<a class="code" href="classapp_1_1xulgui_1_1xulglobalcolor_1_1Xulglobalcolor.html#e88ef1db63a4e430209d9bfd6dd485e2">subjScaleMax</a> + self.<a class="code" href="classapp_1_1xulgui_1_1xulglobalcolor_1_1Xulglobalcolor.html#161bd045510cd4799d5f26e647be37b9">subjScaleMin</a>
<a name="l00134"></a>00134 
<a name="l00135"></a>00135         w1, w2 = self.<a class="code" href="classapp_1_1xulgui_1_1xulglobalcolor_1_1Xulglobalcolor.html#1d860e158c4513ab94286ec4f4684f2d">params</a>[<span class="stringliteral">'weight1'</span>], self.<a class="code" href="classapp_1_1xulgui_1_1xulglobalcolor_1_1Xulglobalcolor.html#1d860e158c4513ab94286ec4f4684f2d">params</a>[<span class="stringliteral">'weight2'</span>]
<a name="l00136"></a>00136         ind.scalefit = ind.fitness = objFitness * w1 + subjFitness * w2
<a name="l00137"></a>00137 
<a name="l00138"></a>00138 <span class="comment">#-------------------------------------------#</span>
<a name="l00139"></a><a class="code" href="classapp_1_1xulgui_1_1xulglobalcolor_1_1Xulglobalcolor.html#92d08633462e87b779506ffaef921b25">00139</a>     <span class="keyword">def </span><a class="code" href="classapp_1_1xulgui_1_1xulglobalcolor_1_1Xulglobalcolor.html#92d08633462e87b779506ffaef921b25">scaleFitness</a>(self, pop):
<a name="l00140"></a>00140         <span class="keywordflow">pass</span>
<a name="l00141"></a>00141 
<a name="l00142"></a>00142 <span class="comment">#-------------------------------------------#</span>
<a name="l00143"></a><a class="code" href="classapp_1_1xulgui_1_1xulglobalcolor_1_1Xulglobalcolor.html#fe7f1607f050f9f5d1a127fdee7120f4">00143</a>     <span class="keyword">def </span><a class="code" href="classapp_1_1xulgui_1_1xulglobalcolor_1_1Xulglobalcolor.html#fe7f1607f050f9f5d1a127fdee7120f4">draw</a>(self, parentPanel, subset, population):
<a name="l00144"></a>00144         <span class="stringliteral">'''</span>
<a name="l00145"></a>00145 <span class="stringliteral">        Return a list of panels to be displayed to the user for evaluation.</span>
<a name="l00146"></a>00146 <span class="stringliteral">        Use the arg parentPanel as the parent for each of the panels created.</span>
<a name="l00147"></a>00147 <span class="stringliteral">        '''</span>
<a name="l00148"></a>00148         panels = []
<a name="l00149"></a>00149         <span class="keyword">import</span> panel.globalcolor_panel <span class="keyword">as</span> individual_panel
<a name="l00150"></a>00150         <span class="keywordflow">for</span> i <span class="keywordflow">in</span> xrange(len(subset)):
<a name="l00151"></a>00151             grid = subset[i].genome[<span class="stringliteral">'grid'</span>]
<a name="l00152"></a>00152             style = self.decode(subset[i].genome[<span class="stringliteral">'style'</span>])
<a name="l00153"></a>00153             panels.append(individual_panel.IndividualPanel(parentPanel, i, style, grid, self.uiWidgets))
<a name="l00154"></a>00154 
<a name="l00155"></a>00155         <span class="keywordflow">return</span> panels
<a name="l00156"></a>00156 
<a name="l00157"></a>00157 
<a name="l00158"></a>00158 <span class="comment">#-------------------------------------------#</span>
<a name="l00159"></a><a class="code" href="classapp_1_1xulgui_1_1xulglobalcolor_1_1Xulglobalcolor.html#66771359c8f9c45ba8cc1d28b484e513">00159</a>     <span class="keyword">def </span><a class="code" href="classapp_1_1xulgui_1_1xulglobalcolor_1_1Xulglobalcolor.html#66771359c8f9c45ba8cc1d28b484e513">report</a>(self, pop, gen):
<a name="l00160"></a>00160         maxFit = 0.0
<a name="l00161"></a>00161         sumFit = 0.0
<a name="l00162"></a>00162         <span class="keywordflow">for</span> ind <span class="keywordflow">in</span> pop:
<a name="l00163"></a>00163             <span class="keywordflow">if</span> ind.fitness &gt; maxFit:
<a name="l00164"></a>00164                 maxFit = ind.fitness
<a name="l00165"></a>00165                 best = ind
<a name="l00166"></a>00166             sumFit += ind.fitness
<a name="l00167"></a>00167             
<a name="l00168"></a>00168         <span class="keywordflow">print</span> <span class="stringliteral">'%i) Best Fit: %.2f, Avg Fit: %.2f'</span> % (gen, best.fitness, sumFit/len(pop))
<a name="l00169"></a>00169 
<a name="l00170"></a>00170 
<a name="l00171"></a>00171 <span class="comment">#-------------------------------------------#</span>
<a name="l00172"></a><a class="code" href="classapp_1_1xulgui_1_1xulglobalcolor_1_1Xulglobalcolor.html#e34f757b9f86c30e97f2b26af08fb3c3">00172</a>     <span class="keyword">def </span><a class="code" href="classapp_1_1xulgui_1_1xulglobalcolor_1_1Xulglobalcolor.html#e34f757b9f86c30e97f2b26af08fb3c3">test</a>(self, pop):
<a name="l00173"></a>00173         <span class="keywordflow">print</span> <span class="stringliteral">'Test'</span>
<a name="l00174"></a>00174 
<a name="l00175"></a>00175 <span class="comment">#------------------------------------------#</span>
<a name="l00176"></a><a class="code" href="classapp_1_1xulgui_1_1xulglobalcolor_1_1Xulglobalcolor.html#9a346438efdd09c1c8fcdd4e33a69a19">00176</a>     <span class="keyword">def </span><a class="code" href="classapp_1_1xulgui_1_1xulglobalcolor_1_1Xulglobalcolor.html#9a346438efdd09c1c8fcdd4e33a69a19">decode</a>(self, chromosome):
<a name="l00177"></a>00177         <span class="stringliteral">'''</span>
<a name="l00178"></a>00178 <span class="stringliteral">        Decodes the chromosome from binary to decimals or floats, or whatever it may be.</span>
<a name="l00179"></a>00179 <span class="stringliteral">        '''</span>
<a name="l00180"></a>00180         <span class="comment"># RGB DECODING</span>
<a name="l00181"></a>00181         values = []
<a name="l00182"></a>00182         step = self.<a class="code" href="classapp_1_1xulgui_1_1xulglobalcolor_1_1Xulglobalcolor.html#41242aa0f38f5aff4aa6817eb02d3566">bits</a> / 3
<a name="l00183"></a>00183         <span class="keywordflow">for</span> i <span class="keywordflow">in</span> xrange(0, self.<a class="code" href="classapp_1_1xulgui_1_1xulglobalcolor_1_1Xulglobalcolor.html#394786b9afe1872e1d4bf726b493deb1">geneLen</a>, self.<a class="code" href="classapp_1_1xulgui_1_1xulglobalcolor_1_1Xulglobalcolor.html#41242aa0f38f5aff4aa6817eb02d3566">bits</a>):
<a name="l00184"></a>00184             color = []
<a name="l00185"></a>00185             color.append(int(string.joinfields(map(str, chromosome[i:i+step]), <span class="stringliteral">''</span>), 2))
<a name="l00186"></a>00186             color.append(int(string.joinfields(map(str, chromosome[i+step:i+step*2]), <span class="stringliteral">''</span>), 2))
<a name="l00187"></a>00187             color.append(int(string.joinfields(map(str, chromosome[i+step*2:i+step*3]), <span class="stringliteral">''</span>), 2))
<a name="l00188"></a>00188 
<a name="l00189"></a>00189             values.append(color)
<a name="l00190"></a>00190 
<a name="l00191"></a>00191         <span class="keywordflow">return</span> values
<a name="l00192"></a>00192 
<a name="l00193"></a>00193 <span class="comment">#------------------------------------------#</span>
<a name="l00194"></a>00194 <span class="comment">#-------------------------------------------#</span>
</pre></div><hr size="1"><address style="text-align: right;"><small>Generated on Tue Nov 27 11:56:03 2007 for IGA framework by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.5.3 </small></address>
</body>
</html>
